# –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è Weekly Review Script

## –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd /Users/elstatic/projects/up_advert_bot/.claude/scripts/weekly_review
pip3 install -r requirements.txt
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã aiohttp, python-dotenv

## –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ .env

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ `.env` –µ—Å—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
cd /Users/elstatic/projects/up_advert_bot
source .env && echo "BITRIX24_WEBHOOK_URL: ${BITRIX24_WEBHOOK_URL:0:40}..."
```

–î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å –Ω–∞—á–∞–ª–æ URL –≤–µ–±—Ö—É–∫–∞.

## –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞

### 3.1 Help –∫–æ–º–∞–Ω–¥–∞

```bash
cd /Users/elstatic/projects/up_advert_bot
python3 .claude/scripts/weekly_review/main.py --help
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥**:
```
usage: main.py [-h] [--week {current,last}] [--from DATE_FROM] [--to DATE_TO] [--debug]

Weekly Review - –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –æ–±–∑–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
...
```

### 3.2 –ó–∞–ø—É—Å–∫ —Å --debug (–ø—Ä–æ—à–ª–∞—è –Ω–µ–¥–µ–ª—è)

```bash
cd /Users/elstatic/projects/up_advert_bot
source .env && python3 .claude/scripts/weekly_review/main.py --week last --debug
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- –í stderr –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
  - `[BitrixClient] –í—ã–ø–æ–ª–Ω—è—é batch –∑–∞–ø—Ä–æ—Å...`
  - `[TaskAnalyzer] –°–±–æ—Ä –∑–∞–¥–∞—á...`
  - `[GitAnalyzer] –ê–Ω–∞–ª–∏–∑ git –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏...`

- –í stdout markdown –æ—Ç—á—ë—Ç:
  ```markdown
  # –û–±–∑–æ—Ä –Ω–µ–¥–µ–ª–∏: DD.MM.YYYY ‚Äî DD.MM.YYYY

  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: **–í–∞—à–µ –ò–º—è**

  ## –ó–∞–¥–∞—á–∏
  ...
  ```

### 3.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ batch –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

–í –æ—Ç–ª–∞–¥–æ—á–Ω–æ–º –≤—ã–≤–æ–¥–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å **2-3 HTTP –∑–∞–ø—Ä–æ—Å–∞ –∫ Bitrix24**, –∞ –Ω–µ 30+:

1. `[BitrixClient] –í—ã–ø–æ–ª–Ω—è—é batch –∑–∞–ø—Ä–æ—Å —Å 5 –∫–æ–º–∞–Ω–¥–∞–º–∏` (–∑–∞–¥–∞—á–∏ + –∫–∞–ª–µ–Ω–¥–∞—Ä—å)
2. `[BitrixClient] –í—ã–ø–æ–ª–Ω—è—é batch –∑–∞–ø—Ä–æ—Å —Å N –∫–æ–º–∞–Ω–¥–∞–º–∏` (—Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ß–∞—Ç—ã —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ —Å—É–±–∞–≥–µ–Ω—Ç `chat-digest` –≤ skill.

### 3.4 –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

```bash
cd /Users/elstatic/projects/up_advert_bot
source .env && time python3 .claude/scripts/weekly_review/main.py --week last
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è**: < 15 —Å–µ–∫—É–Ω–¥ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —á–∞—Ç–æ–≤ –∏ –ø—Ä–æ–µ–∫—Ç–æ–≤)

## –®–∞–≥ 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ skill

### 4.1 –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ —á–µ—Ä–µ–∑ skill

```bash
cd /Users/elstatic/projects/up_advert_bot
# –í Claude Code:
# /weekly-review
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- Skill –≤—ã–ø–æ–ª–Ω—è–µ—Ç Python-—Å–∫—Ä–∏–ø—Ç
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è markdown –æ—Ç—á—ë—Ç

### 4.2 –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ –∏–¥–µ–Ω—Ç–∏—á–µ–Ω –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º—É skill:
- –°–µ–∫—Ü–∏–∏: –ó–∞–¥–∞—á–∏, –í—Å—Ç—Ä–µ—á–∏, –ö–ª—é—á–µ–≤—ã–µ –ø–µ—Ä–µ–ø–∏—Å–∫–∏, –¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã, –ü—Ä–æ–µ–∫—Ç—ã
- –ü—É—Å—Ç—ã–µ —Å–µ–∫—Ü–∏–∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è
- –°—Å—ã–ª–∫–∏ –Ω–∞ –∑–∞–¥–∞—á–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

‚úÖ –°–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ skill (< 15 —Å–µ–∫ vs 30+ —Å–µ–∫)
‚úÖ –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ –∏–¥–µ–Ω—Ç–∏—á–µ–Ω –æ—Ä–∏–≥–∏–Ω–∞–ª—É
‚úÖ –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è —á–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ Claude –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è
‚úÖ Batch API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è Bitrix24 (3-4 –∑–∞–ø—Ä–æ—Å–∞)
‚úÖ Graceful degradation –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (–Ω–µ –ø–∞–¥–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é)
‚úÖ Skill —É—Å–ø–µ—à–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

## Troubleshooting

### –û—à–∏–±–∫–∞: ModuleNotFoundError: No module named 'aiohttp'

**–†–µ—à–µ–Ω–∏–µ**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
cd .claude/scripts/weekly_review && pip3 install -r requirements.txt
```

### –ß–∞—Ç–æ–≤ –Ω–µ—Ç –≤ –≤—ã–≤–æ–¥–µ

**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!** –ß–∞—Ç—ã —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ —Å—É–±–∞–≥–µ–Ω—Ç `chat-digest`, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ skill –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ Python-—Å–∫—Ä–∏–ø—Ç–∞.

### –û—à–∏–±–∫–∞: BITRIX24_WEBHOOK_URL –Ω–µ –∑–∞–¥–∞–Ω –≤ .env

**–ü—Ä–æ–≤–µ—Ä–∫–∞**: URL —É–∂–µ –µ—Å—Ç—å –≤ `.env`, –Ω–æ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ (> 30 —Å–µ–∫)

**–ü—Ä–∏—á–∏–Ω—ã**:
- –ú–Ω–æ–≥–æ —á–∞—Ç–æ–≤ ‚Üí –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `chat_limit` –≤ –∫–æ–¥–µ
- –ú–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–æ–≤ ‚Üí –æ—á–∏—Å—Ç–∏—Ç—å –∫–µ—à `~/.cache/weekly-review/projects-cache.json`
- –ú–µ–¥–ª–µ–Ω–Ω—ã–π Claude API ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

### –ü—É—Å—Ç–æ–π –≤—ã–≤–æ–¥

**–ü—Ä–∏—á–∏–Ω—ã**:
- –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–µ—Ä–∏–æ–¥ ‚Üí –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø–µ—Ä–∏–æ–¥
- –û—à–∏–±–∫–∏ API ‚Üí –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å `--debug` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏:

1. ‚úÖ –°–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üí –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ skill `/weekly-review`
2. ‚ö†Ô∏è –ù—É–∂–Ω—ã —É–ª—É—á—à–µ–Ω–∏—è ‚Üí —Å–º. —Ä–∞–∑–¥–µ–ª "–í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è" –≤ README.md
3. üêõ –ù–∞–π–¥–µ–Ω—ã –±–∞–≥–∏ ‚Üí —Å–æ–∑–¥–∞–π—Ç–µ issue —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏ –ª–æ–≥–∞–º–∏ `--debug`
